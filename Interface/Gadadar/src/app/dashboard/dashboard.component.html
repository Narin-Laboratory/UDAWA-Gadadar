<mat-toolbar color="primary">
    <button
      type="button"
      aria-label="Toggle sidenav"
      mat-icon-button
      (click)="drawer.toggle()">
      <mat-icon aria-label="Side nav toggle icon">menu</mat-icon>
    </button>
    <span>UDAWA Smart System</span>
</mat-toolbar>

<mat-sidenav-container class="sidenav-container">
    <mat-sidenav #drawer class="sidenav" mode="side">
      <mat-toolbar>Menu</mat-toolbar>
      <mat-nav-list>
        <a mat-list-item routerLink="/dashboard">Dashboard</a>
      </mat-nav-list>
    </mat-sidenav>
    <mat-sidenav-content>
        <mat-tab-group>
            <mat-tab label="Monitor">
                <div class="container-fluid mt-3">
                    <div class="row">
                        <div class="col-sm-12 col-lg-6">
                            <div class="card mb-3">
                                <div class="card-body text-center">
                                    <h1 class="card-title">Environmental Sensors</h1>
                                    <div class="row">
                                        <div class="col-sm-6 mb-2">
                                            <h3>Temperature</h3>
                                            <div class="display-6">
                                                {{celc}}Â°C
                                            </div>
                                        </div>
                                        <div class="col-sm-6 mb-2">
                                            <h3>Humidity</h3>
                                            <div class="display-6">
                                                {{rh}}%
                                            </div>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row">
                                        <div class="col-sm-6 mb-2">
                                            <h3>Air Pressure</h3>
                                            <div class="display-6">{{hpa}}hpa</div>
                                        </div>
                                        <div class="col-sm-6 mb-2">
                                            <h3>Altitude (Approx.)</h3>
                                            <div class="display-6">{{alt}}m</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 col-lg-6">
                            <div class="card mb-3">
                                <div class="card-body text-center">
                                    <h1 class="card-title">Power Sensors</h1>
                                    <div class="row">
                                        <div class="col-sm-6 mb-2">
                                            <h3>Voltage</h3>
                                            <div class="display-6">{{volt}}V</div>
                                        </div>
                                        <div class="col-sm-6 mb-2">
                                            <h3>Amperage</h3>
                                            <div class="display-6">{{amp}}A</div>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row">
                                        <div class="col-sm-6 mb-2">
                                            <h3>Watt</h3>
                                            <div class="display-6">{{watt}}W</div>
                                        </div>
                                        <div class="col-sm-6 mb-2">
                                            <h3>Freq. & Power Factor</h3>
                                            <div class="display-6">{{freq}}Hz / {{pf}}%</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </mat-tab>
            <mat-tab label="Control">
                <div class="container-fluid mt-3">
                    <div class="row">
                        <div class="col-sm-12 col-lg-6 mb-2">
                            <div class="card">
                                <div class="card-body">

                                    <div class="form-floating mb-3">
                                        <select id="udawa-rlch" class="form-select" [(ngModel)]="selectedCh">
                                            <option *ngFor="let rly of ch" value="{{rly.id}}">Channel {{rly.id}}</option>
                                        </select>
                                        <label for="udawa-rlch">Select Relay Channel</label>
                                    </div>

                                    <div class="form-floating mb-3">
                                        <select class="form-select" id="udawa-rlch-mode" [(ngModel)]="ch[selectedCh-1].rlyCtrlMd" (change)="changeRelayParams()">
                                            <option *ngFor="let mode of opMode" value="{{mode.id}}">{{mode.mode}}</option>
                                        </select>
                                        <label for="udawa-rlch-mode">Operation mode</label>
                                    </div>

                                    <app-relay-control (switchButton)="switchButton()" (changeRelayParams)="changeRelayParams()" [mode]="ch[selectedCh-1].rlyCtrlMd" [selectedCh]="selectedCh" [(state)]="ch[selectedCh-1].state"
                                        [(dtCyc)]="ch[selectedCh-1].dtCyc" [(dtRng)]="ch[selectedCh-1].dtRng" [(rlyActDT)]="ch[selectedCh-1].rlyActDT"
                                        [(rlyActDr)]="ch[selectedCh-1].rlyActDr" [(rlyActIT)]="ch[selectedCh-1].rlyActIT" [(rlyActITOn)]="ch[selectedCh-1].rlyActITOn"></app-relay-control>

                                    <button type="button" class="btn btn-primary btn-lg btn-block" (click)="savePermanent()">Save Permanent</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 col-lg-6 mb-2">
                            <div class="card">
                                <div class="card-body">
                                    <h1>Relay Control Highlight</h1>

                                    <p>Currently, UDAWA Gadadar supports six modes of control operation. Here is the detail:</p>
                                    <ol>
                                        <li>Manual Switch: You can switch the relay manually via the switch button.</li>
                                        <li>Duty Cycle: You can switch the relay by using a time range and duty cycle. For example, a 50% duty cycle over a 10 minute time range would give you 5 minutes on and 5 minutes off.</li>
                                        <li>Date Time: You can switch the relay precisely at the selected datetime and adjust the on duration.</li>
                                        <li>Time Daily: You can switch the relay on at a selected time daily and adjust the on duration.</li>
                                        <li>Interval: You can switch the relay to on by interval and adjust the on duration.</li>
                                        <li>Environmental Condition: You can use the environmental data as a parameter to adjust when to turn on the switch and for how long it stays on.</li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </mat-tab>
            <mat-tab label="Config">
                <div class="container-fluid mt-3">
                    <div class="row">
                        <div class="col-sm-12 col-lg-6 mb-2">

                        </div>
                        <div class="col-sm-12 col-lg-6 mb-2">

                        </div>
                    </div>
                </div>
            </mat-tab>
        </mat-tab-group>
    </mat-sidenav-content>
</mat-sidenav-container>


